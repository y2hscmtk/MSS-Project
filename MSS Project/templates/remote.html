<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>모바일 리모컨</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.min.js" type="text/javascript"></script>
        <script src="/static/mqttio.js" type="text/javascript"></script>
        <script src="/static/face.js" type="text/javascript"></script>
        <script>
            window.addEventListener("load", function () {
            // http://224..129:8080/에서 224...의 IP만 끊어내는 코드
            var url = new String(document.location);
            ip = (url.split("//"))[1]; // ip = "224...:8080/"
            ip = (ip.split(":"))[0]; // ip = "224..."
            document.getElementById("broker").value = ip
        });
        </script>
        <style>
            canvas {background-color:lightblue}
        </style>
    </head>
    <body>
        <h3>모바일 리모컨</h3>
        <hr>
        <form id="connection-form">
            <b>브로커 IP:</b>
            <input id="broker" type="text" name="broker" value=""><br>
            <b>포트 번호 : 9001</b><br>
            <input type="button" onclick="startConnect()" value="Connect">
            <input type="button" onclick="startDisconnect()" value="Disconnect">
        </form>
        <hr>
        <form id="remote-control-form">
            <h3>전등 조작</h3>
            <label>on <input type="radio" name="led" value="1" onchange="publish('command', 'ledOn')"></label>
            <label>off <input type="radio" name="led" value="0" checked onchange="publish('command', 'ledOff')"><br><br></label>
            <hr>
            <h3>날씨 확인</h3>
            <input type="button" onclick="getTemperature()" value="날씨 확인">
        </form>
        <br>
        <div id="temperature"></div>
        <div id="humidity"></div>
        <hr>
        <h3>CCTV(use OpenCV)</h3>
        <input type="button" onclick="recognizeStart()" value="시작">
        <input type="button" onclick="recognizeStop()" value="종료">
        <form>
            <canvas id="myCanvas" width="320" height="240"></canvas>
        </form>
        <div id="messages"></div>
    </body>
</html>

